<ng-template #loading><app-spinner></app-spinner></ng-template>
<ng-container *ngIf="address$ | async as address; else loading">
    <form class="needs-validation" novalidate="" [formGroup]="addressFormGroup" (ngSubmit)="save()">
    <div class="modal-header">
        <h4 class="modal-title">{{id === 0 ? "Add an Address" : "Update Address"}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row g-3">
            <div class="col-12">
                <label for="address" class="form-label">Address</label>
                <input type="text" class="form-control" id="address" formControlName="streetnumber"
                    placeholder="1234 Main St" required="">
                <div class="invalid-feedback">
                    Please enter your address.
                </div>
            </div>

            <div class="col-12">
                <label for="address2" class="form-label">Address 2 <span class="text-muted">(Optional)</span></label>
                <input type="text" class="form-control" id="address2" formControlName="streetname"
                    placeholder="Apartment or suite">
            </div>

            <div class="col-12">
                <label for="city" class="form-label">City</label>
                <input type="text" class="form-control" id="city" formControlName="city" required="" placeholder="City">
            </div>

            <div class="col-md-4">
                <label for="state" class="form-label">State</label>
                <select class="form-select" id="state" formControlName="state" required="">
                    <option>Andhra Pradesh </option>
                    <option>Arunachal Pradesh </option>
                    <option>Assam </option>
                    <option>Bihar </option>
                    <option>Chandigarh </option>
                    <option>Chhattisgarh </option>
                    <option>Dadra and Nagar Haveli</option>
                    <option>Daman and Diu </option>
                    <option>Delhi </option>
                    <option>Goa </option>
                    <option>Gujarat </option>
                    <option>Haryana </option>
                    <option>Himachal Pradesh </option>
                    <option>Jammu and Kashmir </option>
                    <option>Jharkhand </option>
                    <option>Karnataka </option>
                    <option>Kerala </option>
                    <option>Lakshadweep </option>
                    <option>Madhya Pradesh </option>
                    <option>Maharashtra </option>
                    <option>Manipur </option>
                    <option>Meghalaya </option>
                    <option>Mizoram </option>
                    <option>Nagaland </option>
                    <option>Odisha </option>
                    <option>Pondicherry </option>
                    <option>Port Blair </option>
                    <option>Punjab </option>
                    <option>Rajasthan </option>
                    <option>Sikkim </option>
                    <option>Tamil Nadu </option>
                    <option>Telangana </option>
                    <option>Tripura </option>
                    <option>Uttar Pradesh </option>
                    <option>Uttarakhand </option>
                    <option>West Bengal </option>
                </select>
                <div class="invalid-feedback">
                    Please provide a valid state.
                </div>
            </div>

            <div class="col-md-3">
                <label for="zip" class="form-label">Pin code</label>
                <input type="text" class="form-control" id="zip" formControlName="zip" placeholder="" required="">
                <div class="invalid-feedback">
                    Zip code required.
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="activeModal.close()">Close</button>
        <button class="btn btn-primary" type="submit" [disabled]="!addressFormGroup.valid">Save</button>
    </div>
</form>
</ng-container>